"""
è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«: LM Studio URLã€ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å®šç¾©ã€ã‚«ãƒ†ã‚´ãƒªãƒ¼å®šç¾©
"""

import os

# LM Studioè¨­å®š
LM_STUDIO_URL = "http://localhost:1234/v1/chat/completions"
LM_STUDIO_MODEL = "local-model"  # LM Studioã§ã¯ä»»æ„ã®åå‰ã§OK

# ãƒ‡ãƒ¼ã‚¿ä¿å­˜å…ˆ
DATA_DIR = os.path.join(os.path.dirname(os.path.dirname(__file__)), "data")
PROFILES_DIR = os.path.join(DATA_DIR, "profiles")
SESSIONS_DIR = os.path.join(DATA_DIR, "sessions")

# ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å®šç¾©
CHARACTERS = {
    "misaki": {
        "name": "ç¾å’²",
        "gender": "å¥³æ€§",
        "age": "20ä»£å¾ŒåŠ",
        "description": "æ˜ã‚‹ãèãä¸Šæ‰‹ãªå¥³æ€§",
        "tone": "ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ã§å„ªã—ã„",
        "for_user_gender": "ç”·æ€§",
        "expressions": ["normal", "smile", "surprised", "thinking", "empathy", "encourage"]
    },
    "kenta": {
        "name": "å¥å¤ª",
        "gender": "ç”·æ€§",
        "age": "30ä»£å‰åŠ",
        "description": "è½ã¡ç€ã„ã¦çŸ¥çš„ãªç”·æ€§",
        "tone": "ç©ã‚„ã‹ã§ä¸å¯§",
        "for_user_gender": "å¥³æ€§",
        "expressions": ["normal", "smile", "surprised", "thinking", "empathy", "encourage"]
    },
    "aoi": {
        "name": "ã‚ãŠã„",
        "gender": "ä¸­æ€§çš„",
        "age": "20ä»£",
        "description": "è¦ªã—ã¿ã‚„ã™ãä¸­æ€§çš„ãªã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼",
        "tone": "ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ã§è¦ªã—ã¿ã‚„ã™ã„",
        "for_user_gender": "ãã®ä»–",
        "expressions": ["normal", "smile", "surprised", "thinking", "empathy", "encourage"]
    }
}

# ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ã‚«ãƒ†ã‚´ãƒªãƒ¼å®šç¾©
CATEGORIES = {
    "åŸºæœ¬ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«": {
        "fields": ["åå‰", "æ€§åˆ¥", "å¹´é½¢å±¤", "è·æ¥­", "å®¶æ—æ§‹æˆ"],
        "description": "åŸºæœ¬çš„ãªæƒ…å ±"
    },
    "ãƒ©ã‚¤ãƒ•ã‚¹ãƒˆãƒ¼ãƒªãƒ¼": {
        "fields": ["å­¦æ­´", "è·æ­´", "äººç”Ÿã®è»¢æ©Ÿ", "é‡è¦ãªå‡ºæ¥äº‹"],
        "description": "ã“ã‚Œã¾ã§ã®äººç”Ÿã®æ­©ã¿"
    },
    "ç¾åœ¨ã®ç”Ÿæ´»": {
        "fields": ["1æ—¥ã®éã”ã—æ–¹", "ä½ç’°å¢ƒ", "ç”Ÿæ´»ãƒªã‚ºãƒ "],
        "description": "ä»Šã®æ—¥å¸¸ç”Ÿæ´»"
    },
    "å¥åº·ãƒ»ãƒ©ã‚¤ãƒ•ã‚¹ã‚¿ã‚¤ãƒ«": {
        "fields": ["é‹å‹•ç¿’æ…£", "é£Ÿäº‹", "ç¡çœ ", "å¥åº·ç®¡ç†"],
        "description": "å¥åº·ã‚„ç”Ÿæ´»ç¿’æ…£"
    },
    "è¶£å‘³ãƒ»èˆˆå‘³ãƒ»å¨¯æ¥½": {
        "fields": ["è¶£å‘³", "å¥½ããªã“ã¨", "ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ¡ãƒ³ãƒˆ", "ä¼‘æ—¥ã®éã”ã—æ–¹"],
        "description": "å¥½ããªã“ã¨ã‚„æ¥½ã—ã¿"
    },
    "å­¦ç¿’ãƒ»æˆé•·": {
        "fields": ["å­¦ã³ãŸã„ã“ã¨", "ã‚¹ã‚­ãƒ«", "è‡ªå·±å•“ç™º", "å‹‰å¼·"],
        "description": "æˆé•·ã‚„å­¦ç¿’ã¸ã®å–ã‚Šçµ„ã¿"
    },
    "äººé–“é–¢ä¿‚ãƒ»ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£": {
        "fields": ["å‹äºº", "å®¶æ—é–¢ä¿‚", "ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£", "äººä»˜ãåˆã„"],
        "description": "äººã¨ã®ç¹‹ãŒã‚Š"
    },
    "æƒ…å ±åé›†ãƒ»ãƒ¡ãƒ‡ã‚£ã‚¢": {
        "fields": ["ãƒ‹ãƒ¥ãƒ¼ã‚¹", "SNS", "æƒ…å ±æº", "ãƒ¡ãƒ‡ã‚£ã‚¢åˆ©ç”¨"],
        "description": "æƒ…å ±ã¨ã®å‘ãåˆã„æ–¹"
    },
    "çµŒæ¸ˆãƒ»æ¶ˆè²»": {
        "fields": ["è²·ã„ç‰©", "ãŠé‡‘ã®ä½¿ã„æ–¹", "ä¾¡å€¤åŸºæº–", "çµŒæ¸ˆè¦³"],
        "description": "ãŠé‡‘ã‚„æ¶ˆè²»ã«é–¢ã™ã‚‹è€ƒãˆ"
    },
    "ä¾¡å€¤è¦³ãƒ»å°†æ¥": {
        "fields": ["å¤§åˆ‡ã«ã—ã¦ã„ã‚‹ã“ã¨", "å°†æ¥ã®å¤¢", "ç›®æ¨™", "äººç”Ÿè¦³"],
        "description": "ä¾¡å€¤è¦³ã‚„å°†æ¥ã®ãƒ“ã‚¸ãƒ§ãƒ³"
    }
}

# æ¨™æº–ã‚­ãƒ¼ãƒãƒƒãƒ”ãƒ³ã‚° / Standard Key Mappings
# é¡ä¼¼ã‚­ãƒ¼ã‚’æ¨™æº–ã‚­ãƒ¼ã«æ­£è¦åŒ–ã™ã‚‹ãŸã‚ã®ãƒãƒƒãƒ”ãƒ³ã‚°
STANDARD_KEYS = {
    "åŸºæœ¬ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«": {
        "åå‰": ["åå‰", "æ°å", "ãƒ•ãƒ«ãƒãƒ¼ãƒ ", "å‘¼ã³å"],
        "å¹´é½¢": ["å¹´é½¢", "å¹´ä»£", "æ­³", "å¹´é½¢å±¤"],
        "æ€§åˆ¥": ["æ€§åˆ¥", "ã‚¸ã‚§ãƒ³ãƒ€ãƒ¼"],
        "è·æ¥­": ["è·æ¥­", "ä»•äº‹", "æ¥­ç¨®", "è·ç¨®", "å‹¤å‹™å…ˆ"],
        "ä½æ‰€": ["ä½æ‰€", "å±…ä½åœ°", "ä½ã¾ã„", "å±…ä½å ´æ‰€"],
        "å®¶æ—æ§‹æˆ": ["å®¶æ—æ§‹æˆ", "å®¶æ—", "ä¸–å¸¯æ§‹æˆ", "å®¶æ—äººæ•°"],
        "ä½å±…çŠ¶æ³": ["ä½å±…çŠ¶æ³", "ä½å±…å½¢æ…‹", "ä½å®…"]
    },
    "ãƒ©ã‚¤ãƒ•ã‚¹ãƒˆãƒ¼ãƒªãƒ¼": {
        "å­¦æ­´": ["å­¦æ­´", "å’æ¥­æ ¡", "å‡ºèº«æ ¡", "æœ€çµ‚å­¦æ­´"],
        "è·æ­´": ["è·æ­´", "çµŒæ­´", "ã‚­ãƒ£ãƒªã‚¢", "ä»•äº‹çµŒé¨“"],
        "äººç”Ÿã®è»¢æ©Ÿ": ["äººç”Ÿã®è»¢æ©Ÿ", "è»¢æ©Ÿ", "é‡è¦ãªå‡ºæ¥äº‹", "è»¢æ›ç‚¹"],
        "å‡ºèº«åœ°": ["å‡ºèº«åœ°", "åœ°å…ƒ", "æ•…éƒ·", "ç”Ÿã¾ã‚ŒãŸå ´æ‰€"],
        "ç¿’æ…£": ["ç¿’æ…£", "æ—¥èª²", "ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³", "è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³"],
        "æ´»å‹•": ["æ´»å‹•", "è¡Œå‹•", "å–ã‚Šçµ„ã¿", "ã‚¢ã‚¯ã‚·ãƒ§ãƒ³"],  # é‡è¤‡è§£æ¶ˆ: è¡Œå‹•â†’æ´»å‹•
        "çµŒé¨“": ["çµŒé¨“", "ä½“é¨“", "éå»ã®çµŒé¨“"],
        "ç›®çš„": ["ç›®çš„", "ç›®æ¨™", "ç‹™ã„"],
        "æ—…è¡Œå…ˆ": ["æ—…è¡Œå…ˆ", "æ—…è¡Œ", "è¨ªå•åœ°"],
        "å­ä¾›ã®æ´»å‹•": ["å­ä¾›ã®æ´»å‹•", "å­ä¾›ã®ç¿’ã„äº‹", "å­ä¾›ã®è¶£å‘³"],
        "å­ä¾›ã®å¹´é½¢å±¤": ["å­ä¾›ã®å¹´é½¢å±¤", "å­ä¾›ã®å¹´é½¢", "å­ä¾›ã®å­¦å¹´"],
        "éƒ¨æ´»çµŒé¨“": ["éƒ¨æ´»çµŒé¨“", "éƒ¨æ´»", "ã‚¯ãƒ©ãƒ–æ´»å‹•"]
    },
    "ç¾åœ¨ã®ç”Ÿæ´»": {
        "ä½å±…": ["ä½å±…", "ä½ã¾ã„", "å®¶", "è‡ªå®…", "éƒ¨å±‹"],
        "ç”Ÿæ´»ãƒªã‚ºãƒ ": ["ç”Ÿæ´»ãƒªã‚ºãƒ ", "1æ—¥ã®éã”ã—æ–¹", "æ—¥å¸¸", "ãƒ©ã‚¤ãƒ•ã‚¹ã‚¿ã‚¤ãƒ«"],
        "é£Ÿäº‹": ["é£Ÿäº‹", "é£Ÿäº‹æ™‚é–“", "é£Ÿç”Ÿæ´»", "é£Ÿäº‹ç¿’æ…£"],
        "ç¡çœ ": ["ç¡çœ ", "ç¡çœ æ™‚é–“", "å°±å¯æ™‚é–“", "èµ·åºŠæ™‚é–“"],
        "é€šå‹¤": ["é€šå‹¤", "é€šå‹¤å ´æ‰€", "å‹¤å‹™åœ°", "é€šå‹¤æ™‚é–“"],
        "å¤–è¦‹": ["å¤–è¦‹", "è¦‹ãŸç›®", "èº«ãªã‚Š"]
    },
    "å¥åº·ãƒ»ãƒ©ã‚¤ãƒ•ã‚¹ã‚¿ã‚¤ãƒ«": {
        "é‹å‹•ç¿’æ…£": ["é‹å‹•ç¿’æ…£", "é‹å‹•", "ã‚¨ã‚¯ã‚µã‚µã‚¤ã‚º", "ã‚¹ãƒãƒ¼ãƒ„"],
        "é£Ÿäº‹å¥½ã¿": ["é£Ÿäº‹å¥½ã¿", "å¥½ããªé£Ÿã¹ç‰©", "å«Œã„ãªé£Ÿã¹ç‰©", "é£Ÿã®å¥½ã¿"],
        "å¥åº·çŠ¶æ…‹": ["å¥åº·çŠ¶æ…‹", "å¥åº·", "ä½“èª¿", "èº«ä½“çŠ¶æ³"],
        "åŒ»ç™‚": ["åŒ»ç™‚", "åŒ»ç™‚æ©Ÿé–¢", "é€šé™¢", "æ²»ç™‚"],
        "ç—‡çŠ¶": ["ç—‡çŠ¶", "ä½“ã®ä¸èª¿", "ç—›ã¿"],
        "ç²¾ç¥çŠ¶æ…‹": ["ç²¾ç¥çŠ¶æ…‹", "ãƒ¡ãƒ³ã‚¿ãƒ«", "å¿ƒã®çŠ¶æ…‹", "æ°—æŒã¡"]
    },
    "è¶£å‘³ãƒ»èˆˆå‘³ãƒ»å¨¯æ¥½": {
        "è¶£å‘³": ["è¶£å‘³", "å¥½ããªã“ã¨", "ãƒãƒã£ã¦ã„ã‚‹ã“ã¨"],
        "éŸ³æ¥½": ["éŸ³æ¥½", "éŸ³æ¥½ã‚¸ãƒ£ãƒ³ãƒ«", "å¥½ããªéŸ³æ¥½"],
        "é£Ÿã¹ç‰©": ["é£Ÿã¹ç‰©", "å¥½ããªé£Ÿã¹ç‰©", "ã‚°ãƒ«ãƒ¡"],
        "æ—…è¡Œ": ["æ—…è¡Œ", "æ—…è¡Œå…ˆ", "è¦³å…‰"],
        "æ´»å‹•": ["æ´»å‹•", "å¨¯æ¥½æ´»å‹•", "ãƒ¬ã‚¸ãƒ£ãƒ¼"],
        "ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ": ["ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ", "SNS", "ä½¿ç”¨ã‚¢ãƒ—ãƒª"],
        "èˆˆå‘³": ["èˆˆå‘³", "é–¢å¿ƒ", "èˆˆå‘³ã®ã‚ã‚‹ã“ã¨"],
        "æœè£…": ["æœè£…", "ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³", "ç€ãŸã„æœ"]
    },
    "å­¦ç¿’ãƒ»æˆé•·": {
        "å­¦ç¿’å†…å®¹": ["å­¦ç¿’å†…å®¹", "å‹‰å¼·", "å­¦ã‚“ã§ã„ã‚‹ã“ã¨"],
        "åˆ†é‡": ["åˆ†é‡", "å°‚é–€", "é ˜åŸŸ"],
        "æ´»å‹•": ["æ´»å‹•", "å­¦ç¿’æ´»å‹•", "å–ã‚Šçµ„ã¿"],
        "ç›®æ¨™": ["ç›®æ¨™", "ç›®æŒ‡ã™ã‚‚ã®", "ã‚´ãƒ¼ãƒ«"],
        "èˆˆå‘³": ["èˆˆå‘³", "é–¢å¿ƒåˆ†é‡", "èˆˆå‘³ã®ã‚ã‚‹åˆ†é‡"],
        "ã‚¹ã‚­ãƒ«": ["ã‚¹ã‚­ãƒ«", "èƒ½åŠ›", "æŠ€è¡“"]
    },
    "äººé–“é–¢ä¿‚ãƒ»ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£": {
        "å‹äºº": ["å‹äºº", "å‹é”", "ä»²é–“"],
        "å®¶æ—é–¢ä¿‚": ["å®¶æ—é–¢ä¿‚", "å®¶æ—ã¨ã®é–¢ä¿‚", "è¦ªå­é–¢ä¿‚"],
        "æ‰€å±": ["æ‰€å±", "æ‰€å±å›£ä½“", "ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£"],
        "æ´»å‹•": ["æ´»å‹•", "äº¤æµæ´»å‹•", "ç¤¾ä¼šæ´»å‹•"],
        "éƒ¨æ´»": ["éƒ¨æ´»", "ã‚¯ãƒ©ãƒ–", "ã‚µãƒ¼ã‚¯ãƒ«"]
    },
    "æƒ…å ±åé›†ãƒ»ãƒ¡ãƒ‡ã‚£ã‚¢": {
        "æƒ…å ±æº": ["æƒ…å ±æº", "ãƒ‹ãƒ¥ãƒ¼ã‚¹æº", "ãƒ¡ãƒ‡ã‚£ã‚¢"],
        "SNS": ["SNS", "ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ¡ãƒ‡ã‚£ã‚¢", "ä½¿ç”¨SNS"],
        "ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ": ["ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ", "ä½¿ç”¨ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ", "ãƒ¡ãƒ‡ã‚£ã‚¢åˆ©ç”¨"],
        "é–¢å¿ƒäº‹": ["é–¢å¿ƒäº‹", "èˆˆå‘³ã®ã‚ã‚‹ãƒ‹ãƒ¥ãƒ¼ã‚¹", "é–¢å¿ƒã®ã‚ã‚‹è©±é¡Œ"]
    },
    "çµŒæ¸ˆãƒ»æ¶ˆè²»": {
        "å¹´å": ["å¹´å", "åå…¥", "çµ¦æ–™", "æ‰€å¾—"],
        "è²¡æ”¿çŠ¶æ³": ["è²¡æ”¿çŠ¶æ³", "ãŠé‡‘ã®çŠ¶æ³", "çµŒæ¸ˆçŠ¶æ³"],
        "æŠ•è³‡": ["æŠ•è³‡", "æŠ•è³‡ã‚¹ã‚¿ã‚¤ãƒ«", "è³‡ç”£é‹ç”¨"],
        "æ¶ˆè²»": ["æ¶ˆè²»", "è²·ã„ç‰©", "æ”¯å‡º"]
    },
    "ä¾¡å€¤è¦³ãƒ»å°†æ¥": {
        "ä¾¡å€¤è¦³": ["ä¾¡å€¤è¦³", "å¤§åˆ‡ã«ã—ã¦ã„ã‚‹ã“ã¨", "ä¿¡æ¡"],
        "å¤¢": ["å¤¢", "å°†æ¥ã®å¤¢", "ã‚„ã‚ŠãŸã„ã“ã¨"],
        "äººç”Ÿè¦³": ["äººç”Ÿè¦³", "äººç”Ÿãƒ“ã‚¸ãƒ§ãƒ³", "äººç”Ÿã®ç›®æ¨™"],
        "ç†æƒ³": ["ç†æƒ³", "ç†æƒ³ã®ç”Ÿæ´»", "ç†æƒ³åƒ"],
        "æˆé•·è¦³": ["æˆé•·è¦³", "æˆé•·ã¸ã®è€ƒãˆ", "è‡ªå·±å•“ç™º"]
    }
}


def get_standard_key(category: str, raw_key: str) -> str:
    """
    Get standardized key name for a raw key
    ç”Ÿã®ã‚­ãƒ¼åã‚’æ¨™æº–ã‚­ãƒ¼åã«å¤‰æ›

    Args:
        category: ã‚«ãƒ†ã‚´ãƒªãƒ¼å
        raw_key: å¤‰æ›å‰ã®ã‚­ãƒ¼å

    Returns:
        æ¨™æº–åŒ–ã•ã‚ŒãŸã‚­ãƒ¼åï¼ˆãƒãƒƒãƒ”ãƒ³ã‚°ãŒãªã„å ´åˆã¯å…ƒã®ã‚­ãƒ¼åï¼‰
    """
    if category not in STANDARD_KEYS:
        return raw_key

    for standard_key, variations in STANDARD_KEYS[category].items():
        if raw_key in variations:
            return standard_key

    # ãƒãƒƒãƒ”ãƒ³ã‚°ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯å…ƒã®ã‚­ãƒ¼ã‚’è¿”ã™
    return raw_key


# ãƒãƒƒã‚¸å®šç¾©
BADGES = {
    "ã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ¼ãƒˆ": {
        "description": "æ„Ÿæƒ…çš„ãªè©±ã‚’3å›ä»¥ä¸Šå…±æœ‰ã—ãŸ",
        "condition": "emotional_count >= 3",
        "icon": "ğŸ’–"
    },
    "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ†ãƒ©ãƒ¼": {
        "description": "äººç”Ÿã®è»¢æ©Ÿã«ã¤ã„ã¦èªã£ãŸ",
        "condition": "has_life_event",
        "icon": "ğŸ“–"
    },
    "å¤šè¶£å‘³": {
        "description": "5ã¤ä»¥ä¸Šã®è¶£å‘³ã‚’æŒã£ã¦ã„ã‚‹",
        "condition": "hobby_count >= 5",
        "icon": "ğŸ¨"
    },
    "å“²å­¦è€…": {
        "description": "ä¾¡å€¤è¦³ã«ã¤ã„ã¦æ·±ãèªã£ãŸ",
        "condition": "philosophy_depth >= 3",
        "icon": "ğŸ¤”"
    },
    "ç¶™ç¶šã¯åŠ›ãªã‚Š": {
        "description": "3æ—¥é€£ç¶šã§ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’è¡Œã£ãŸ",
        "condition": "consecutive_days >= 3",
        "icon": "ğŸ”¥"
    },
    "å¤œæ›´ã‹ã—": {
        "description": "æ·±å¤œ0æ™‚ä»¥é™ã«ä¼šè©±ã—ãŸ",
        "condition": "late_night_session",
        "icon": "ğŸŒ™"
    },
    "é•·ã„ä»˜ãåˆã„": {
        "description": "10å›ä»¥ä¸Šã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å®Œäº†",
        "condition": "session_count >= 10",
        "icon": "ğŸ†"
    },
    "ã‚µãƒ—ãƒ©ã‚¤ã‚º": {
        "description": "äºˆæƒ³å¤–ã®ä¸€é¢ã‚’è¦‹ã›ãŸ",
        "condition": "has_surprise",
        "icon": "âœ¨"
    },
    "æ€ç´¢è€…": {
        "description": "æ·±ã„æ€è€ƒã‚’å…±æœ‰ã—ãŸ",
        "condition": "deep_thought_count >= 3",
        "icon": "ğŸ’­"
    },
    "è¨˜æ†¶ã®å®ˆè­·è€…": {
        "description": "å¹¼å°‘æœŸã®è¨˜æ†¶ã‚’å…±æœ‰ã—ãŸ",
        "condition": "has_childhood_memory",
        "icon": "ğŸˆ"
    }
}

# ãƒ©ãƒ³ãƒ€ãƒ ã‚¤ãƒ™ãƒ³ãƒˆå®šç¾©
RANDOM_EVENTS = {
    "ã‚¯ã‚¤ãƒƒã‚¯ãƒˆãƒ¼ã‚¯": {
        "prompt": "å¥½ããªé£Ÿã¹ç‰©ãƒ™ã‚¹ãƒˆ3ã‚’æ•™ãˆã¦ï¼",
        "category": "è¶£å‘³ãƒ»èˆˆå‘³ãƒ»å¨¯æ¥½",
        "trigger_rate": 0.15
    },
    "ã‚‚ã—ã‚‚ãƒˆãƒ¼ã‚¯": {
        "prompt": "ã‚‚ã—å®ãã˜ã§1å„„å††å½“ãŸã£ãŸã‚‰ä½•ã™ã‚‹ï¼Ÿ",
        "category": "ä¾¡å€¤è¦³ãƒ»å°†æ¥",
        "trigger_rate": 0.10
    },
    "æ€ã„å‡ºã‚¿ã‚¤ãƒ ": {
        "prompt": "å­ä¾›ã®é ƒã®ä¸€ç•ªæ¥½ã—ã‹ã£ãŸæ€ã„å‡ºã¯ï¼Ÿ",
        "category": "ãƒ©ã‚¤ãƒ•ã‚¹ãƒˆãƒ¼ãƒªãƒ¼",
        "trigger_rate": 0.15
    }
}

# äººé–“å½¢æˆã‚¹ãƒ†ãƒ¼ã‚¸
HUMAN_STAGES = [
    {"stage": 1, "min_data": 0, "image": "stage1.svg", "description": "è¼ªéƒ­ã®ã¿"},
    {"stage": 2, "min_data": 10, "image": "stage2.svg", "description": "é¡”ãƒ»ä½“ã®è¼ªéƒ­"},
    {"stage": 3, "min_data": 25, "image": "stage3.svg", "description": "æœè£…ãƒ»åŸºæœ¬"},
    {"stage": 4, "min_data": 50, "image": "stage4.svg", "description": "è¡¨æƒ…ãƒ»ã‚¢ã‚¯ã‚»ã‚µãƒªãƒ¼"},
    {"stage": 5, "min_data": 100, "image": "stage5.svg", "description": "ç›®ã«å…‰ãƒ»ã‚ªãƒ¼ãƒ©"}
]

# ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¨­å®š
REACTION_TIERS = {
    "small": {
        "threshold": 20,  # æ–‡å­—æ•°
        "sound": "pop.mp3",
        "effect": "expression_change"
    },
    "medium": {
        "threshold": 50,
        "sound": "chime.mp3",
        "effect": "particles"
    },
    "large": {
        "threshold": 100,
        "sound": "success.mp3",
        "effect": "flash"
    }
}
